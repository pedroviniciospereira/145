# 1. Herança de Template: 
# Define que este arquivo herda a estrutura do 'base.html'.
{% extends 'base.html' %}

# 2. Carregar Bibliotecas de Tags:
# Habilita o uso das tags 'static' (necessário para {% static %}).
{% load static %}

# 3. Bloco de Título:
# Define o título da página. Usa uma tag {% if %} para mudar o texto
# dependendo se a variável 'colaborador' (enviada pela view de edição) existe.
{% block title %}{% if colaborador %}Editar{% else %}Cadastrar{% endif %} Colaborador{% endblock %}

# 4. Bloco de Conteúdo Principal:
# Define o conteúdo principal desta página (o formulário).
{% block content %}

    <div class="page-header">
        # Tag {% if %}: Condicional simples. Verifica se a variável 'colaborador' existe.
        # Se existir (modo Edição), mostra "Editar". Se não (modo Cadastro), mostra "Cadastrar".
        <h1>{% if colaborador %}Editar{% else %}Cadastrar{% endif %} Colaborador</h1>
        # Tag {% url %}: Gera a URL para a view com o nome 'index'.
        <a href="{% url 'index' %}" class="btn-secondary">
            <svg class="icon"><use href="#icon-arrow-left"></use></svg>
            Voltar para a lista
        </a>
    </div>

    <div class="form-card">
        <div class="form-header">
            <svg class="icon-large"><use href="#icon-plus-circle"></use></svg>
            # Condicional {% if %} para mudar o título do card.
            <h2>{% if colaborador %}Dados do Colaborador{% else %}Novo Colaborador{% endif %}</h2>
        </div>
        
        <div id="alert-success" style="display: none;">Colaborador salvo com sucesso!</div> 

        # Formulário HTML padrão, método POST para enviar dados.
        <form id="colaborador-form" method="POST">
            # 5. Tag CSRF Token: ESSENCIAL para segurança em formulários POST.
            # O Django usa isso para prevenir ataques Cross-Site Request Forgery.
            # Ele insere um campo <input type="hidden"> com um token único.
            {% csrf_token %} 
            
            <div class="form-group">
                <label for="nome">Nome Completo <span class="required">*</span></label>
                # Input com valor pré-preenchido:
                # O 'value' usa a variável {{ colaborador.nome_completo }}.
                # O Filtro |default:'' garante que, se 'colaborador' não existir
                # (modo Cadastro), o valor será uma string vazia, evitando erros.
                <input type="text" id="nome" name="nome_completo" placeholder="Digite o nome completo" 
                       value="{{ colaborador.nome_completo|default:'' }}" required>
            </div>

            <div class="form-group">
                <label for="cpf">CPF <span class="required">*</span></label>
                # Preenche o valor do CPF, usando |default:'' se for cadastro novo.
                <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" 
                       value="{{ colaborador.cpf|default:'' }}" required maxlength="14">
            </div>

            <div class="form-group">
                <label for="funcao">Função <span class="required">*</span></label>
                # Preenche o valor da função, usando |default:'' se for cadastro novo.
                <input type="text" id="funcao" name="funcao" list="lista-funcoes" placeholder="Selecione ou digite a função" 
                       value="{{ colaborador.funcao|default:'' }}" required>
                <datalist id="lista-funcoes">
                    <option value="Almoxarife">
                    <option value="Pedreiro">
                    <option value="Eletricista">
                    <option value="Mestre de Obras">
                    <option value="Carpinteiro">
                    <option value="Servente">
                    <option value="Armador">
                </datalist>
            </div>

            <div class="form-group">
                <label for="status">Status <span class="required">*</span></label>
                <select id="status" name="status" required>
                    # Condicional {% if %} dentro da tag <option>:
                    # Verifica se o status do 'colaborador' atual é 'Ativo'.
                    # Se for, adiciona o atributo 'selected' a esta opção.
                    <option value="Ativo" {% if colaborador.status == 'Ativo' %}selected{% endif %}>Ativo</option>
                    # Faz o mesmo para o status 'Inativo'.
                    <option value="Inativo" {% if colaborador.status == 'Inativo' %}selected{% endif %}>Inativo</option>
                </select>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    <svg class="icon"><use href="#icon-save"></use></svg>
                    Salvar Colaborador
                </button>
            </div>
        </form>
    </div>

# Fim do Bloco de Conteúdo Principal.
{% endblock %}